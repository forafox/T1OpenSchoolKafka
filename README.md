# Задание: Реализация системы мониторинга с использованием Spring Kafka

## Описание:

Создана система мониторинга, которая отслеживает работу различных компонентов вашего приложения
с помощью Spring Kafka. Эта система включает в себя Producer для отправки метрик,
Consumer для их обработки и анализа, а также REST API для просмотра метрик.

## Стек

- Java
- Spring Boot
- Gradle
- PostgreSQL

## Особенности

- Документация к API.(Интерактивная и api-docs.json)
- Для приложения разработана инструкция по сборке. Сборка выполняется с помощью Docker.
- Присутствует файл .env. Представленные данные являются публичными и используются только! при тестировании.

## Общая архитектура системы

### Producer Service:

1. Создан микросервис "Metrics Producer", который отслеживает и собирает метрики работы приложения
   и отправляет их в Kafka топик "metrics-topic".
2. Реализованы следующие API для взаимодействия с микросервисом:
    - POST /metrics: Отправка метрик работы приложения в формате JSON. Метрики могут включать информацию о
      производительности, использовании ресурсов, ошибках и т. д.

### Consumer Service:

1. Создан микросервис "Metrics Consumer", который принимает метрики из Kafka топика "metrics-topic"
   и анализируеи их для выявления проблем и трендов.
2. Реализована обработка метрик и вывод статистики в логи или базу данных для последующего анализа.

## Metrics Consumer API

- Получение списка всех метрик
    - GET /metrics
- Получение конкретной метрики по ее идентификатору
    - GET /metrics/{id}

## Film Api (Перенесено из задания №1)

### Аннотация @Throw

Методы FilmServiceImpl, которые обрабатывают следующие эндпоинты:

- /film/id/{id}
- /film/title/{titleName}
- /film/producer/{producer}
- /film/genre/{genre}
- /film/country/{country}

### Аннотация @TrackTime

Методы FilmServiceImpl, которые обрабатывают следующие эндпоинты:

- /film
- /film/id/{id}
- /film/genre/{genre}
- /film/country/{country}

### Аннотация @TrackAsyncTime

Методы FilmServiceImpl, которые обрабатывают следующие эндпоинты:

- /film
- /film/title/{titleName}
- /film/producer/{producer}

## Ссылки (Доступны во время работы приложения)

- Интерактивная Swagger документация (http://localhost:8080/swagger-ui/index.html#/)

## Сборка

Для сборки приложения необходимо выполнить следующие действия.

1. Склонировать репозиторий:

   ```bash
   git clone https://github.com/forafox/T1OpenSchoolKafka
   cd T1OpenSchoolKafka
   ```

2. Выполнить build в директории приложения с помощью следующей команды:

   ```bash
   docker compose build 
   ```
3. Для запуска приложения необходимо выполнить следующую команду:

   ```bash
   docker compose up
   ```

- Пункты 3 и 4 **можно** объединить в следующую команду:

    ```bash
    docker compose up --build
    ```

### Критерии оценки работы:

1. Микросервисы должны успешно обмениваться данными через Kafka и обеспечивать сбор и анализ метрик
   работы приложения.
2. API должно быть хорошо спроектировано, документировано и соответствовать принципам RESTful.
3. Система должна быть масштабируемой, надежной и обладать высокой производительностью.
4. Должна быть предоставлена документация, объясняющая архитектуру системы, конфигурацию Kafka,
   а также инструкции по запуску и использованию системы.
